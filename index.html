<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SR Diagnostics Immobiliers</title>
  <meta name="description" content="Diagnostics immobiliers pour vente & location : DPE, amiante, plomb, √©lectricit√©, gaz, ERP, termites. Arras, Lens, H√©nin, Beaumont, Douai, B√©thune." />
  <style>
    :root{--blue:#1c7df0;--ink:#0f2744;--bg:#f4f8ff;--card:#fff;--border:#d4e3fb;--chip:#e8f1ff;}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;line-height:1.55;background:var(--bg);color:var(--ink)}
    header{padding:42px 18px;max-width:980px;margin:auto}
    main{max-width:980px;margin:auto;padding:0 18px 40px}
    footer{padding:24px 18px;opacity:.85;max-width:980px;margin:auto}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:18px;margin:12px 0;box-shadow:0 4px 18px rgba(32,74,135,.08)}
    h1{margin:0 0 10px;font-size:34px;letter-spacing:-.3px}
    a{color:#1565c0}
    nav{margin:16px 0 0;display:flex;gap:10px;flex-wrap:wrap}
    nav a{padding:8px 12px;border-radius:10px;background:var(--chip);text-decoration:none}
    .grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
    .form-grid{display:grid;gap:10px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
    label{display:block;margin:10px 0 6px;font-weight:600}
    input,textarea,select{width:100%;padding:10px;border-radius:10px;border:1px solid #b9d1f3;background:#fff;color:var(--ink)}
    button{padding:12px 14px;border-radius:10px;border:0;background:var(--blue);color:#fff;font-weight:800;cursor:pointer}
    button.secondary{background:#0f2744}
    .result{margin-top:14px;padding:14px;border-radius:12px;background:#eff6ff;border:1px solid #b7d2fb}
    .note{font-size:.95rem;opacity:.9}
    .hidden{display:none}
    .pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:#eaf2ff;border:1px solid #cfe2ff;font-weight:700}
    .muted{opacity:.85}
    .hr{height:1px;background:#dbe8ff;margin:14px 0}
  </style>
</head>
<body>
  <header>
    <h1>SR Diagnostics Immobiliers</h1>
    <p class="muted">Diagnostics immobiliers pour vente & location ‚Äî DPE, amiante, plomb, √©lectricit√©, gaz, ERP, termites.</p>

    <p class="muted">
      <span class="pill">üìû <a href="tel:+33767076761">07 67 07 67 61</a></span>
      &nbsp;
      <span class="pill">‚úâÔ∏è <a href="mailto:stephanr.pro@gmail.com">stephanr.pro@gmail.com</a></span>
      &nbsp;
      <span class="pill">üïí Lun‚ÄìDim 8h‚Äì20h</span>
    </p>

    <nav>
      <a href="index.html">Accueil & devis</a>
      <a href="actualites.html">Actualit√©s</a>
      <a href="#contact">Contact</a>
    </nav>
  </header>

  <main>
    <div class="grid">
      <div class="card">
        <h2>Prestations</h2>
        <ul>
          <li>DPE</li>
          <li>Amiante</li>
          <li>Plomb (CREP)</li>
          <li>√âlectricit√©</li>
          <li>Gaz</li>
          <li>ERP</li>
          <li>Termites (√©tat parasitaire)</li>
        </ul>
        <p class="note">Copropri√©t√© : PPT / DTG sur devis (via contact).</p>
      </div>

      <div class="card">
        <h2>Zone d‚Äôintervention</h2>
        <p>Arras ‚Ä¢ Lens ‚Ä¢ H√©nin ‚Ä¢ Beaumont ‚Ä¢ Douai ‚Ä¢ B√©thune (rayon 50 km)</p>
        <div class="hr"></div>
        <p class="note">Valeurs : confiance ‚Ä¢ transparence ‚Ä¢ honn√™tet√© ‚Ä¢ efficacit√© ‚Ä¢ engagement</p>
      </div>
    </div>

    <div class="card">
      <h2>Devis en ligne</h2>
      <p class="note">
        S√©lection indicative bas√©e sur l‚Äôann√©e du bien et vos r√©ponses. Validation finale apr√®s √©change.
        <br>ERP est inclus par d√©faut.
      </p>

      <form name="devis" method="POST" action="/merci.html" data-netlify="true" netlify-honeypot="bot-field" id="devis-form">
        <input type="hidden" name="form-name" value="devis" />
        <p class="hidden"><label>Ne pas remplir ce champ: <input name="bot-field" /></label></p>

        <input type="hidden" name="diagnostics_a_prevoir" id="diagnostics-a-prevoir" />
        <input type="hidden" name="sur_devis" id="sur-devis" value="non" />

        <div class="form-grid">
          <div><label for="nom">Nom</label><input id="nom" name="nom" required /></div>
          <div><label for="email">Email</label><input id="email" name="email" type="email" required /></div>
          <div><label for="telephone">T√©l√©phone</label><input id="telephone" name="telephone" /></div>

          <div>
            <label for="type-projet">Type de projet</label>
            <select id="type-projet" name="type_projet" required>
              <option value="">S√©lectionner</option>
              <option value="vente">Vente</option>
              <option value="location">Location</option>
            </select>
          </div>

          <div>
            <label for="type-bien">Type de bien</label>
            <select id="type-bien" name="type_bien" required>
              <option value="">S√©lectionner</option>
              <option value="maison">Maison</option>
              <option value="appartement">Appartement</option>
              <option value="immeuble">Immeuble</option>
              <option value="local_pro">Local professionnel</option>
            </select>
          </div>

          <div>
            <label for="annee-construction">Ann√©e de construction / permis</label>
            <input id="annee-construction" name="annee_construction" type="number" min="1600" max="2100" placeholder="Ex : 1930" required />
          </div>

          <div>
            <label for="surface">Surface (m¬≤)</label>
            <input id="surface" name="surface" type="number" min="1" placeholder="Ex : 85" required />
            <p class="note">Au-del√† de 200 m¬≤ : sur devis.</p>
          </div>
        </div>

        <h3>Options</h3>
        <div class="form-grid">
          <div>
            <label for="has-gaz">Installation de gaz fixe</label>
            <select id="has-gaz" name="installation_gaz_fixe" required>
              <option value="">S√©lectionner</option>
              <option value="oui">Oui</option>
              <option value="non">Non</option>
            </select>
          </div>
          <div>
            <label for="has-elec">Installation √©lectrique</label>
            <select id="has-elec" name="installation_electrique" required>
              <option value="">S√©lectionner</option>
              <option value="oui">Oui</option>
              <option value="non">Non</option>
            </select>
          </div>
          <div>
            <label for="dpe-deja">J‚Äôai d√©j√† un DPE valide</label>
            <select id="dpe-deja" name="dpe_deja_valide" required>
              <option value="">S√©lectionner</option>
              <option value="oui">Oui</option>
              <option value="non">Non</option>
            </select>
          </div>
        </div>

        <h3>Termites (auto-check indicatif)</h3>
        <p class="note">V√©rification indicative : la r√©f√©rence officielle reste l‚Äôarr√™t√© pr√©fectoral / mairie.</p>
        <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center;">
          <a class="pill" href="https://termite.com.fr/rechercher/" target="_blank" rel="noopener">üîé V√©rifier sur termite.com.fr</a>
          <label style="margin:0;font-weight:700;">
            <input type="checkbox" id="termite-zone" name="zone_termites_selon_verif" />
            Ma commune est en zone termites (selon v√©rification)
          </label>
        </div>

        <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap;">
          <button type="button" id="calculer-devis">Calculer</button>
          <button class="secondary" type="submit">Envoyer la demande</button>
        </div>

        <div class="result" id="resultat-devis" aria-live="polite" hidden></div>

        <label for="message">Message compl√©mentaire</label>
        <textarea id="message" name="message" rows="5" placeholder="Adresse du bien, ville, √©tage, acc√®s, disponibilit√©s‚Ä¶"></textarea>
      </form>
    </div>

    <div class="card" id="contact">
      <h2>Contact</h2>
      <p><strong>T√©l :</strong> <a href="tel:+33767076761">07 67 07 67 61</a></p>
      <p><strong>Email :</strong> <a href="mailto:stephanr.pro@gmail.com">stephanr.pro@gmail.com</a></p>
      <p class="note">Lun‚ÄìDim 8h‚Äì20h ‚Ä¢ R√©ponse rapide</p>
    </div>
  </main>

  <footer>¬© SR Diagnostics Immobiliers ‚Äî Mentions l√©gales √† compl√©ter</footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const mapLabels = {
        dpe: 'DPE',
        amiante: 'Amiante',
        plomb: 'Plomb (CREP)',
        gaz: 'Gaz',
        electricite: '√âlectricit√©',
        erp: 'ERP (√âtat des risques)',
        termites: '√âtat parasitaire (termites)'
      };
      const $ = (id) => document.getElementById(id);
      const val = (id) => ($(id)?.value || '').trim();
      const checked = (id) => !!$(id)?.checked;

      function getDiagnosticsRecommandes() {
        const year = Number(val('annee-construction'));
        const surface = Number(val('surface'));
        const hasGaz = val('has-gaz') === 'oui';
        const hasElec = val('has-elec') === 'oui';
        const dpeDeja = val('dpe-deja') === 'oui';
        const termitesZone = checked('termite-zone');

        const billed = new Set();
        billed.add('erp');
        if (!dpeDeja) billed.add('dpe');
        if (year && year < 1949) billed.add('plomb');
        if (year && year < 1997) billed.add('amiante');
        if (hasGaz) billed.add('gaz');
        if (hasElec) billed.add('electricite');
        if (termitesZone) billed.add('termites');

        const list = [...billed];
        const surDevis = (surface && surface > 200) || list.length === 0 || list.length > 6;
        return { list, surDevis, surface };
      }

      function computeAndRender() {
        const result = $('resultat-devis');
        const hiddenDiag = $('diagnostics-a-prevoir');
        const hiddenSurDevis = $('sur-devis');
        const message = $('message');

        const { list, surDevis, surface } = getDiagnosticsRecommandes();

        hiddenDiag.value = list.map(d => mapLabels[d]).join(', ') || 'Aucun';
        hiddenSurDevis.value = surDevis ? 'oui' : 'non';

        const htmlList = list.length
          ? `<ul>${list.map(d => `<li>${mapLabels[d]}</li>`).join('')}</ul>`
          : `<p>Aucun diagnostic n‚Äôa √©t√© s√©lectionn√©. Nous vous recontactons pour √©tablir un devis.</p>`;

        result.innerHTML = `
          <p><strong>Diagnostics √† pr√©voir :</strong></p>
          ${htmlList}
          <p><strong>Surface :</strong> ${Number.isFinite(surface) ? surface + ' m¬≤' : '‚Äî'}</p>
          <p><strong>Statut :</strong> ${surDevis ? 'Sur devis (nous vous recontactons)' : 'Pack calculable (confirm√© apr√®s √©change)'}</p>
          <p class="note">R√®gles : plomb avant 1949 ‚Ä¢ amiante avant 1997 ‚Ä¢ ERP inclus ‚Ä¢ gaz/√©lec selon pr√©sence ‚Ä¢ termites selon v√©rification. Sur devis si &gt;200 m¬≤, 0 diag, ou &gt;6 diags.</p>
        `;
        result.hidden = false;

        const resume =
          `Pr√©-s√©lection automatique :\n` +
          `- Diagnostics : ${hiddenDiag.value}\n` +
          `- Sur devis : ${hiddenSurDevis.value}\n`;

        message.value = message.value.replace(/\n?Pr√©-s√©lection automatique:[\s\S]*$/m, '').trim();
        message.value = `${message.value}\n\n${resume}`.trim();
      }

      $('calculer-devis')?.addEventListener('click', computeAndRender);
      $('devis-form')?.addEventListener('submit', computeAndRender);
    });
  </script>
</body>
</html>
